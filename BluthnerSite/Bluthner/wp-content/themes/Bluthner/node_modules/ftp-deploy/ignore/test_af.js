const path = require('path');
const FtpDeploy = require('../src/ftp-deploy.js');

const ftpDeploy = new FtpDeploy();

const config = {
    username: 'amsterdamf',
    password: 'eB80w_5a', // Optional, prompted if none given
    host: 'ftp.amsterdamfoodie.nl',
    port: 21,
    localRoot: path.join(__dirname, '../test/local'),
    remoteRoot: '/beta.amsterdamfoodie.nl/ftp',
    debugMode: true,
    exclude: ['.*', 'tmp/*', 'build/*', '.DS_Store']
};

function logUploaded(data) {
    console.log('uploaded:');
    console.log(data);
}
ftpDeploy.on('uploaded', logUploaded);

function logUploading(data) {
    console.log('uploading');
    console.log(data);
}
ftpDeploy.on('uploading', logUploading);

ftpDeploy.deploy(config, err => {
    if (err) {
        console.log(err);
    } else {
        console.log('finished');
    }
    ftpDeploy.removeListener('uploaded', logUploaded);
    ftpDeploy.removeListener('uploading', logUploading);
});